# Бд
- Легка
- Логування дій(вставка, оновлення, видалення)
- soft delete
- Треба якось зекономити використання бд
- Таблиці 
	- Правила
		- Айді
		- тип правила
		- корисне навантадення правила
		- айді задачі
		- чи активне правило
	- Задача
		- айді (лонг)
		- чи активна
		- дата створення
		- дата оновлення
		- посилання на правила
		- максимальна кілткість спроб
		- корисне навантаження
	* Запущена задача за правилами
		* айді
		* час запуску
		* номер спроби
		* статус [[#^0b650e]]
		* айді задачі(для отримання інформаціїї)
    * Таблиці логування
#  Кодова база
- мікросервіси
- Атомарність обробки надсилань повідомлень
	- типу якщо запустилась оброб ка, то довести її до кінця, якщо не вийшло зробити частину задачі то кинути в помилку
- Статусна модель для повідомлення
	- NotProcessed', 'Event not yet processed
	- InProgress', 'Event taken to work
	- Failed', 'Processing completed with an error. Check ErrorCode and ErrorDescription for more details
	- Done', 'Processing completed successfully
- Статусна модель для завдань-повідомлень ^0b650e
	- 'New' epsr_name,'Event not yet processed' epsr_descriptor
	- 'Processing' epsr_name,'Event not yet processed' epsr_descriptor
	- 'Enqueued' epsr_name,'Event not yet processed' epsr_descriptor
	- 'Canceled' epsr_name,'Event not yet processed' epsr_descriptor
	- 'Expired' epsr_name,'Event not yet processed' epsr_descriptor
	- 'Error' epsr_name,'Event not yet processed' epsr_descriptor
	- 'SendedToBroker' epsr_name,'Event not yet processed' epsr_descriptor
	- 'SendingError' epsr_name,'Event not yet processed' epsr_descriptor
	- 'SendingSuccessful' epsr_name,'Event not yet processed' epsr_descriptor
- C# тригери для запису логів до бд
# Нюанси
- Використання ажур функцій
- Використання реббіту
- Збереження енумів як рядків у бд
- Може бути багато різних доступних каналів для шаблону, треба виставляти пріорітет для каналу і брати наступний по пріорітету канал
	- canals.Exclude(оброблені канали).OrderBy(priority).FirstOrDefault()
